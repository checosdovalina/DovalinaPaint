root@srv1187030:/home/dovalina/app# cd /home/dovalina/app
pm2 delete dovalina
pm2 start dist/index.js --name "dovalina" --env-file .env
[PM2][ERROR] Process or Namespace dovalina not found

  error: unknown option `--env-file'

root@srv1187030:/home/dovalina/app# pm2 restart dovalina
Use --update-env to update environment variables
[PM2][ERROR] Process or Namespace dovalina not found
root@srv1187030:/home/dovalina/app# cat > /home/dovalina/app/ecosystem.config.js << 'EOF'                           cat > /home/dovalina/app/ecosystem.config.js << 'EOF'ports = {
module.exports = {
  apps: [{'dovalina',
    name: 'dovalina',ex.js',
    script: 'dist/index.js',
    env: {_ENV: 'production',
      NODE_ENV: 'production',
      PORT: 5000,L: 'postgresql://dovalina_user:TuPasswordSeguro123!@localhost:5      DATABASE_URL: 'postgresql://dovalina_user:TuPasswordSeguro123!@localhost:5432/dovalina_db',calhost',
      PGHOST: 'localhost',a_db',
      PGDATABASE: 'dovalina_db',
      PGUSER: 'dovalina_user',eguro123!',
      PGPASSWORD: 'TuPasswordSeguro123!',
      PGPORT: 5432,T: 'DovalinaProPainters2024SecretKey!'
      SESSION_SECRET: 'DovalinaProPainters2024SecretKey!'
    }
  }]
};F
EOF
pm2 start ecosystem.config.js
pm2 start ecosystem.config.js
pm2 savetup
pm2 startup
[PM2][ERROR] File ecosystem.config.js malformated
ReferenceError: module is not defined in ES module scope
This file is being treated as an ES module because it has a '.js' file extension and '/home/dovalina/app/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
    at file:///home/dovalina/app/ecosystem.config.js:1:1
    at ModuleJobSync.runSync (node:internal/modules/esm/module_job:437:37)
    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:389:47)
    at loadESMFromCJS (node:internal/modules/cjs/loader:1363:24)
    at Module._compile (node:internal/modules/cjs/loader:1503:5)
    at Module._extensions..js (node:internal/modules/cjs/loader:1623:10)
    at Module.load (node:internal/modules/cjs/loader:1266:32)
    at Module._load (node:internal/modules/cjs/loader:1091:12)
    at Module.require (node:internal/modules/cjs/loader:1289:19)
    at require (node:internal/modules/helpers:182:18)
[PM2] Saving current process list...
[PM2][WARN] PM2 is not managing any process, skipping save...
[PM2][WARN] To force saving use: pm2 save --force
[PM2] Init System found: systemd
Platform systemd
Template
[Unit]
Description=PM2 process manager
Documentation=https://pm2.keymetrics.io/
After=network.target

[Service]
Type=forking
User=root
LimitNOFILE=infinity
LimitNPROC=infinity
LimitCORE=infinity
Environment=PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin
Environment=PM2_HOME=/root/.pm2
PIDFile=/root/.pm2/pm2.pid
Restart=on-failure

ExecStart=/usr/lib/node_modules/pm2/bin/pm2 resurrect
ExecReload=/usr/lib/node_modules/pm2/bin/pm2 reload all
ExecStop=/usr/lib/node_modules/pm2/bin/pm2 kill

[Install]
WantedBy=multi-user.target

Target path
/etc/systemd/system/pm2-root.service
Command list
[ 'systemctl enable pm2-root' ]
[PM2] Writing init configuration in /etc/systemd/system/pm2-root.service
[PM2] Making script booting at startup...
[PM2] [-] Executing: systemctl enable pm2-root...
Created symlink '/etc/systemd/system/multi-user.target.wants/pm2-root.service' â†’ '/etc/systemd/system/pm2-root.service'.
[PM2] [v] Command successfully executed.
+---------------------------------------+
[PM2] Freeze a process list on reboot via:
$ pm2 save

[PM2] Remove init script via:
$ pm2 unstartup systemd
root@srv1187030:/home/dovalina/app# 